<%- include("partials/header.ejs") %>
<body class="wrapper">
    <div class="page">
      
<div class="blog_container">
    <% let index = 0; %> <% blogs.forEach(blog => { %>
    
    <div class="blog"  data-id="<%= index %>">
        <div class="tooltip">
        <span class="tooltiptext">Click to View</span>
      <h3><%= blog.title %></h3>
      <p>Author: <%= blog.author %></p>
      <% if (typeof blog.content === `string` && blog.content.length > 40) { %>
      <p></p>
      <p>Preview: <%= blog.content.slice(0,32) %>...</p>
      <% } else { %>
        <%console.log("Content too short")%>
        <p>Click to read the blog.</p>
      <% } %>  
      <p>Date: <%= blog.date %></p>
      
    <div class="btns">
      <form action="/delete-blog" method="post">
        <input type="hidden" name="blogIndex" value="<%= index %>" />
        <button class = "delete-button">Delete</button>
      </form>
      
      <form action="/editPage" method="post" enctype="application/x-www-form-urlencoded">
        <input type="hidden" name="blogIndex" value="<%= index %>" />
        <button class = "edit-button">Edit</button>
      </form>

      <form action="/view-blog" method="get">
        <input type="hidden" name="blogIndex" value="<%= index %>" />
      </form>
        </div>
    </div>
    </div>
      <%index++%>
    </div>

    <% }) %>
</div>

<%- include("partials/footer.ejs") %>